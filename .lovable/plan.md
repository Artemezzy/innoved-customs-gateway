
# География присутствия — интерактивная карта России на странице «Услуги»

## Что будет сделано

Новая секция «География присутствия» появится на странице «Услуги» сразу под сеткой карточек услуг. На ней будет статичный SVG-контур России с маркерами городов. При наведении/нажатии на маркер справа (на мобильных — снизу) появляется карточка с информацией об услугах в этом городе.

## Структура компонентов

```text
ServicesPage
├── Hero Section (уже есть)
├── Services (сетка карточек — уже есть)
└── ServicesPresenceSection (НОВЫЙ)
    ├── Заголовок "География присутствия"
    ├── Подсказка "Наведите или нажмите на город..."
    └── Flex-контейнер (десктоп: row, мобильный: column)
        ├── RussiaPresenceMap (НОВЫЙ — SVG-карта + маркеры)
        └── CityInfoPanel (НОВЫЙ — панель с данными города)
```

## Новые файлы

### 1. `src/data/cities-config.ts`
Конфигурация всех 28 городов. Каждый город описан типом:
```text
CityConfig { name: string; nameEn: string; slug: string; x: number; y: number }
```
Координаты x/y (0-100) относительно viewBox SVG. Список городов:
- 8 обязательных: Владивосток, Иркутск, Новосибирск, Москва, Санкт-Петербург, Забайкальск, Новороссийск, Красноярск
- 20 дополнительных: Екатеринбург, Казань, Самара, Ростов-на-Дону, Краснодар, Уфа, Пермь, Челябинск, Нижний Новгород, Волгоград, Воронеж, Омск, Тюмень, Хабаровск, Калининград, Мурманск, Архангельск, Якутск, Петропавловск-Камчатский, Южно-Сахалинск

Также в этом файле будет mock-функция `fetchCityServices(slug)`, которая возвращает JSON с заголовком, описанием и списком услуг. Когда появится реальный API-эндпоинт `/services/{slug}`, достаточно будет заменить только эту функцию.

### 2. `src/components/RussiaPresenceMap.tsx`
SVG-компонент карты:
- viewBox фиксированный, ширина адаптивная (100% контейнера)
- Контур России — один `<path>` без внутренних границ, цвет из палитры сайта (`primary` с пониженной непрозрачностью)
- Маркеры — `<circle>` в акцентном цвете, позиция рассчитывается из x/y конфига
- Hover-эффект: увеличение радиуса + смена цвета через CSS transition
- Тултип: простой `<g>` c `<rect>` + `<text>` над маркером, появляется при hover
- Props: `cities`, `activeCitySlug`, `hoveredCitySlug`, `onCityHover`, `onCitySelect`
- Компонент чисто визуальный — не знает о загрузке данных

### 3. `src/components/CityInfoPanel.tsx`
Панель отображения информации по городу:
- Состояния: пустое (ничего не выбрано), загрузка (Skeleton), данные, ошибка
- Показывает: заголовок, описание, список услуг буллетами
- Сообщение об ошибке: «Не удалось загрузить информацию по этому городу...»
- Использует существующие Card, Skeleton, Badge компоненты

### 4. `src/components/ServicesPresenceSection.tsx`
Обёртка-секция:
- Заголовок «География присутствия» / «Our Presence» (двуязычный)
- Подсказка под заголовком
- Layout: `flex flex-col lg:flex-row gap-8`
- Управляет состоянием: `hoveredCity`, `activeCity`, `cityData`, `isLoading`, `error`
- Логика:
  - onCityHover — загружает данные (с debounce ~200ms), показывает в панели
  - onCitySelect (click) — фиксирует город, данные остаются при уведении мыши
  - На мобильных: tap = select
- Вызывает `fetchCityServices(slug)` из конфига

## Изменения в существующих файлах

### `src/pages/ServicesPage.tsx`
Добавить импорт и рендер `<ServicesPresenceSection language={language} />` после `<Services />`.

## Визуальный стиль

- Фон секции: `bg-muted` (контраст с предыдущей секцией `bg-background`)
- Контур РФ: `fill` в цвете `primary` с opacity 15%, обводка `primary` с opacity 30%
- Маркеры: акцентный цвет (`accent`), при hover — `primary` + scale 1.5 + glow-тень
- Активный маркер: `primary` + белая обводка + постоянный glow
- Панель: существующий `Card` с `shadow-card`
- Анимации: fade-in при появлении данных, scale transition на маркерах

## Мобильная адаптация

- Карта занимает 100% ширины, панель — под картой
- Маркеры чуть крупнее для удобства tap (минимум 12px радиус)
- Подсказка меняется: «Нажмите на город...» вместо «Наведите...»

## Технические детали

- SVG-path контура России будет упрощённый (около 200-300 точек) для производительности
- Координаты городов подобраны под viewBox карты, легко корректируются в одном конфиге
- Mock-данные для `fetchCityServices` генерируются из существующего `servicesData` — каждому городу назначается подмножество услуг
- Никаких новых зависимостей не требуется
